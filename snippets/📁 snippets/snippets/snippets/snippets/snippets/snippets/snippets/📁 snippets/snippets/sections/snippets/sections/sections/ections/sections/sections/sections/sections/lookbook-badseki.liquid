{% schema %}
{
  "name": "Lookbook — BADSEKI",
  "settings": [
    { "type": "text", "id": "heading", "label": "Titre", "default": "LOOKBOOK 2025" },
    { "type": "textarea", "id": "intro", "label": "Introduction", "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua." },
    { "type": "header", "content": "Crédits" },
    { "type": "text", "id": "credits_title", "label": "Titre crédits", "default": "CREDITS" },
    { "type": "textarea", "id": "credits_lines", "label": "Lignes de crédits (une par ligne)", "default": "Lorem ipsum dolor sit amet\nConsectetur adipiscing elit sed do eiusmod\nTempor incididunt ut labore et dolore magna" }
  ],
  "blocks": [
    {
      "type": "look",
      "name": "Look",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "title", "label": "Titre du look", "default": "LOOK 01" },
        { "type": "textarea", "id": "items", "label": "Items (séparés par des virgules)", "default": "Lorem Ipsum, Dolor Sit Amet, Consectetur" },
        { "type": "text", "id": "description", "label": "Description", "default": "Lorem ipsum dolor" },
        { "type": "url", "id": "link", "label": "Lien (optionnel)" }
      ]
    }
  ],
  "presets": [
    { "name": "Lookbook — BADSEKI", "blocks": [{ "type": "look" }, { "type": "look" }, { "type": "look" }] }
  ]
}
{% endschema %}

<div class="min-h-screen bg-white pt-16">
  <!-- Header -->
  <section class="px-6 pt-8 pb-12 border-b border-black/20">
    <div class="text-center max-w-3xl mx-auto">
      <h1 class="uppercase mb-4" style="font-size:32px;letter-spacing:0.05em;font-weight:400">
        {{ section.settings.heading | escape }}
      </h1>
      {% if section.settings.intro != blank %}
        <p class="opacity-70 mx-auto" style="font-size:14px;letter-spacing:0.02em;line-height:1.7">
          {{ section.settings.intro | escape }}
        </p>
      {% endif %}
    </div>
  </section>

  <!-- Lookbook Grid -->
  <section class="px-6 py-12">
    <div class="grid md:grid-cols-2 gap-12">
      {% for block in section.blocks %}
        {% if block.type == 'look' %}
          {% assign items_list = block.settings.items | split: ',' %}
          <div class="group cursor-pointer" {{ block.shopify_attributes }}>
            {% if block.settings.link != blank %}<a href="{{ block.settings.link }}">{% endif %}
              <div class="w-full relative mb-4" style="aspect-ratio:3/4;">
                {% if block.settings.image != blank %}
                  {{ block.settings.image | image_url: width: 1600 | image_tag: class: 'w-full h-full object-cover' }}
                {% else %}
                  <div class="absolute inset-0 bg-black flex items-center justify-center text-white/60 text-xs tracking-widest">IMAGE</div>
                {% endif %}
              </div>
            {% if block.settings.link != blank %}</a>{% endif %}

            {% if block.settings.title != blank %}
              <div class="uppercase mb-2 opacity-60" style="font-size:11px;letter-spacing:0.1em">
                {{ block.settings.title }}
              </div>
            {% endif %}

            {% if items_list.size > 0 and block.settings.items != blank %}
              <div class="mb-2 group-hover:opacity-60 transition-opacity" style="font-size:14px;letter-spacing:0.02em">
                {% for it in items_list %}
                  {{ it | strip }}{% if forloop.last == false %} • {% endif %}
                {% endfor %}
              </div>
            {% endif %}

            {% if block.settings.description != blank %}
              <div class="opacity-70" style="font-size:13px;letter-spacing:0.02em">
                {{ block.settings.description }}
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}

      {% if section.blocks.size == 0 %}
        <!-- Fallback quand aucun look -->
        {% for i in (1..6) %}
          <div class="group">
            <div class="w-full relative mb-4" style="aspect-ratio:3/4;">
              <div class="absolute inset-0 bg-black/5"></div>
            </div>
            <div class="uppercase mb-2 opacity-60" style="font-size:11px;letter-spacing:0.1em">LOOK 0{{ i }}</div>
            <div class="" style="font-size:14px;letter-spacing:0.02em">Item A • Item B • Item C</div>
            <div class="opacity-70" style="font-size:13px;letter-spacing:0.02em">Description…</div>
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </section>

  <!-- Credits -->
  <section class="px-6 pb-20 border-t border-black/20 pt-12">
    <div class="max-w-2xl mx-auto text-center">
      {% if section.settings.credits_title != blank %}
        <div class="uppercase mb-6" style="font-size:12px;letter-spacing:0.1em;font-weight:400">
          {{ section.settings.credits_title | escape }}
        </div>
      {% endif %}
      {% if section.settings.credits_lines != blank %}
        <div class="space-y-2 opacity-70" style="font-size:13px;letter-spacing:0.02em;line-height:1.8">
          {% assign lines = section.settings.credits_lines | newline_to_br | split: '<br />' %}
          {% for line in lines %}
            {% if line != '' %}
              <p>{{ line | strip }}</p>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </section>
</div>
