{% comment %}
  PROGRESS BAR
  ------------
  Shopify Liquid version of Radix Progress component.
  Displays an animated progress bar for loading, completion, or metrics.

  Usage Example:
  {% render 'progress', value: 60 %}
{% endcomment %}

{% assign progress_value = value | default: 0 %}
{% assign progress_id = id | default: "progress-" | append: section.id %}

<style>
  .liquid-progress {
    position: relative;
    width: 100%;
    height: 8px;
    border-radius: 999px;
    background-color: rgba(0,0,0,0.1);
    overflow: hidden;
  }

  .progress-indicator {
    height: 100%;
    background-color: #111;
    width: 0;
    transition: width 0.3s ease;
  }

  .progress-label {
    display: block;
    font-size: 13px;
    color: #444;
    margin-top: 6px;
    text-align: right;
  }
</style>

<div
  class="liquid-progress"
  id="{{ progress_id }}"
  role="progressbar"
  aria-valuemin="0"
  aria-valuemax="100"
  aria-valuenow="{{ progress_value }}"
>
  <div
    class="progress-indicator"
    style="width: {{ progress_value }}%;"
  ></div>
</div>

<span class="progress-label">{{ progress_value }}%</span>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const bar = document.querySelector('#{{ progress_id }} .progress-indicator');
    const target = {{ progress_value | default: 0 }};
    bar.style.width = target + '%';
  });
</script>
