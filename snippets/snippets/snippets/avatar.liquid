{% comment %}
  AVATAR
  ------
  Liquid version of Radix Avatar.
  Displays a circular user image with fallback initials or placeholder color.

  Usage:
    {% render 'avatar',
      image: 'https://cdn.shopify.com/s/files/1/0000/0000/files/user.jpg',
      alt: 'User photo',
      fallback: 'CY'
    %}
{% endcomment %}

{% assign img_src = image | default: '' %}
{% assign img_alt = alt | default: 'Avatar' %}
{% assign fallback_text = fallback | default: '?' %}

<style>
  .avatar {
    position: relative;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: #e5e5e5;
    color: #555;
    font-weight: 600;
    font-size: 14px;
    text-transform: uppercase;
  }
  .avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
</style>

<div class="avatar" role="img" aria-label="{{ img_alt }}">
  {% if img_src != blank %}
    <img src="{{ img_src }}" alt="{{ img_alt }}" onerror="this.style.display='none';this.parentElement.querySelector('.avatar-fallback').style.display='flex';">
  {% endif %}
  <div class="avatar-fallback" style="{% if img_src != blank %}display:none;{% endif %}">
    {{ fallback_text }}
  </div>
</div>
